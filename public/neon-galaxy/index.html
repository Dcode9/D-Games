<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Galaxy</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050510;
            font-family: 'Segoe UI', sans-serif;
            touch-action: none;
        }
        canvas { display: block; }
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #00ffff;
            font-size: 20px;
            text-shadow: 0 0 10px #00ffff;
            pointer-events: none;
        }
        #start-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(5, 5, 16, 0.85);
            z-index: 10;
            transition: opacity 0.5s;
        }
        h1 { color: #fff; font-size: 50px; text-shadow: 0 0 20px #ff00de; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 5px; }
        button {
            padding: 15px 40px;
            background: transparent;
            border: 2px solid #00ffff;
            color: #00ffff;
            font-size: 20px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            transition: 0.3s;
        }
        button:hover { background: #00ffff; color: #000; box-shadow: 0 0 30px rgba(0, 255, 255, 0.8); }
    </style>
</head>
<body>
    <div id="ui">SCORE: <span id="score">0</span></div>
    <div id="start-screen">
        <h1>Neon Galaxy</h1>
        <button id="start-btn">Launch Mission</button>
    </div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        // Game State
        let gameRunning = false;
        let score = 0;
        let frame = 0;

        // Assets
        const player = { x: 0, y: 0, w: 30, h: 30, color: '#00ffff' };
        let bullets = [];
        let enemies = [];
        let particles = [];
        let stars = [];

        // Resize
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            player.x = width / 2;
            player.y = height - 100;
        }
        window.addEventListener('resize', resize);
        resize();

        // Inputs
        const input = { x: width / 2, y: height - 100, active: false };
        
        window.addEventListener('mousemove', e => {
            if(gameRunning) {
                player.x = e.clientX;
                player.y = e.clientY;
            }
        });
        
        window.addEventListener('touchmove', e => {
            e.preventDefault();
            if(gameRunning) {
                player.x = e.touches[0].clientX;
                player.y = e.touches[0].clientY;
            }
        }, {passive: false});

        document.getElementById('start-btn').addEventListener('click', startGame);

        // Classes
        class Bullet {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.speed = 15;
                this.active = true;
            }
            update() {
                this.y -= this.speed;
                if (this.y < 0) this.active = false;
            }
            draw() {
                ctx.fillStyle = '#ff00de';
                ctx.shadowBlur = 10;
                ctx.shadowColor = '#ff00de';
                ctx.fillRect(this.x - 2, this.y, 4, 15);
                ctx.shadowBlur = 0;
            }
        }

        class Enemy {
            constructor() {
                this.w = 40; this.h = 40;
                this.x = Math.random() * (width - this.w);
                this.y = -50;
                this.speed = 3 + Math.random() * 3;
                this.hp = 2;
                this.active = true;
                this.angle = 0;
            }
            update() {
                this.y += this.speed;
                this.angle += 0.05;
                if (this.y > height) this.active = false;
            }
            draw() {
                ctx.save();
                ctx.translate(this.x + this.w/2, this.y + this.h/2);
                ctx.rotate(this.angle);
                ctx.strokeStyle = '#ff3333';
                ctx.lineWidth = 3;
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#ff0000';
                ctx.strokeRect(-this.w/2, -this.h/2, this.w, this.h);
                
                // Inner core
                ctx.fillStyle = `rgba(255, 50, 50, 0.5)`;
                ctx.fillRect(-this.w/4, -this.h/4, this.w/2, this.h/2);
                
                ctx.restore();
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y;
                this.color = color;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 5;
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.life = 1.0;
                this.decay = Math.random() * 0.03 + 0.01;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life -= this.decay;
            }
            draw() {
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, 3, 3);
                ctx.globalAlpha = 1;
            }
        }

        class Star {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 2;
                this.speed = Math.random() * 5 + 1;
                this.brightness = Math.random();
            }
            update() {
                this.y += this.speed;
                if(this.y > height) {
                    this.y = 0;
                    this.x = Math.random() * width;
                }
            }
            draw() {
                ctx.fillStyle = `rgba(255, 255, 255, ${this.brightness})`;
                ctx.fillRect(this.x, this.y, this.size, this.size);
            }
        }

        // Init Background
        for(let i=0; i<100; i++) stars.push(new Star());

        function startGame() {
            gameRunning = true;
            score = 0;
            bullets = [];
            enemies = [];
            particles = [];
            document.getElementById('start-screen').style.opacity = 0;
            setTimeout(() => document.getElementById('start-screen').style.display = 'none', 500);
            updateUI();
            loop();
        }

        function gameOver() {
            gameRunning = false;
            document.getElementById('start-screen').style.display = 'flex';
            setTimeout(() => document.getElementById('start-screen').style.opacity = 1, 10);
            document.querySelector('#start-screen h1').innerText = "GAME OVER";
            document.getElementById('start-btn').innerText = "Retry";
        }

        function createExplosion(x, y, color) {
            for(let i=0; i<15; i++) {
                particles.push(new Particle(x, y, color));
            }
        }

        function updateUI() {
            document.getElementById('score').innerText = score;
        }

        function loop() {
            if(!gameRunning) return;
            requestAnimationFrame(loop);
            ctx.clearRect(0, 0, width, height);

            frame++;

            // Background
            stars.forEach(s => { s.update(); s.draw(); });

            // Player
            ctx.save();
            ctx.translate(player.x, player.y);
            
            // Engine trail
            if (frame % 3 === 0) {
                 particles.push(new Particle(player.x, player.y + 20, '#00ffff'));
            }

            // Draw Ship
            ctx.beginPath();
            ctx.moveTo(0, -20);
            ctx.lineTo(15, 15);
            ctx.lineTo(0, 5);
            ctx.lineTo(-15, 15);
            ctx.closePath();
            ctx.fillStyle = '#000';
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 2;
            ctx.shadowBlur = 20;
            ctx.shadowColor = '#00ffff';
            ctx.fill();
            ctx.stroke();
            ctx.shadowBlur = 0;
            ctx.restore();

            // Bullets
            if(frame % 8 === 0) bullets.push(new Bullet(player.x, player.y - 20));
            
            bullets.forEach((b, i) => {
                b.update();
                b.draw();
                if(!b.active) bullets.splice(i, 1);
            });

            // Enemies
            if(frame % 40 === 0) enemies.push(new Enemy());

            enemies.forEach((e, i) => {
                e.update();
                e.draw();

                // Collision Player
                const dx = player.x - (e.x + e.w/2);
                const dy = player.y - (e.y + e.h/2);
                const dist = Math.sqrt(dx*dx + dy*dy);
                if(dist < 30) {
                    createExplosion(player.x, player.y, '#00ffff');
                    gameOver();
                }

                // Collision Bullets
                bullets.forEach((b, bi) => {
                    if(b.x > e.x && b.x < e.x + e.w && b.y > e.y && b.y < e.y + e.h) {
                        createExplosion(e.x + e.w/2, e.y + e.h/2, '#ff3333');
                        e.active = false;
                        b.active = false;
                        score += 100;
                        updateUI();
                    }
                });

                if(!e.active) enemies.splice(i, 1);
            });

            // Particles
            particles.forEach((p, i) => {
                p.update();
                p.draw();
                if(p.life <= 0) particles.splice(i, 1);
            });
        }

        // Background loop for menu
        function bgLoop() {
            if(gameRunning) return;
            requestAnimationFrame(bgLoop);
            ctx.fillStyle = '#050510';
            ctx.fillRect(0, 0, width, height);
            stars.forEach(s => { s.update(); s.draw(); });
        }
        bgLoop();

    </script>
</body>
</html>
